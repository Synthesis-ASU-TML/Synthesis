max v2;#N vpatcher 131 220 764 723;#P origin 33 -15;#P flonum 379 308 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 339 308 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 299 308 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 379 284 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 379 268 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 339 284 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 339 268 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 299 284 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 299 268 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 46 286 233 196617 expr 50. * ($f1 * $f1 + $f2 * $f2 + $f3 * $f3);#P newex 191 222 27 196617 - 0.;#P newex 103 222 27 196617 - 0.;#P newex 15 222 27 196617 - 0.;#P newex 191 98 27 196617 t f f;#P newex 103 98 27 196617 t f f;#P newex 15 98 27 196617 t f f;#P newex 207 197 29 196617 Lave;#P newex 191 170 29 196617 Lave;#P newex 120 199 29 196617 Lave;#P newex 103 170 29 196617 Lave;#P newex 31 200 29 196617 Lave;#P newex 15 170 29 196617 Lave;#P newex 208 145 65 196617 Llast 120;#P newex 191 126 59 196617 Llast 20;#P newex 120 145 65 196617 Llast 120;#P newex 103 126 59 196617 Llast 20;#P newex 32 145 65 196617 Llast 120;#P newex 15 126 59 196617 Llast 20;#P comment 284 163 212 196617 give us what we want.;#P comment 284 149 212 196617 With appropriate choices of t \, T should;#P comment 284 134 212 196617 "tilt" is | <a>_T - <a>_t | with 0 < t < T;#P comment 284 192 212 196617 i used values of T=120 samples \, and t = 20 samples. care must be taken \, because max supports lists only up to size 128 or 256 \, depending on the object...;#P newex 191 73 59 196617 r $3;#P newex 103 73 59 196617 r $2;#P newex 15 73 59 196617 r $1;#P newex 46 311 59 9 s $4;#P comment 29 420 263 196617 nik@f0.am - extracted to fit pseudo sensor framework;#P comment 28 341 257 196617 You may use \, modify and/or distribute under the terms of the GNU General Public License. Please see the LICENSE file for the specific terms of the license.;#P comment 28 383 204 196617 copyright 2001 yon vissel and FoAM vzw.;#P comment 28 402 162 196617 yon@proptronix.com - initial code;#P comment 15 51 266 196617 takes x \, y \, z from one sensor unit \, anc calulate the tilt;#P comment 17 15 50 196626 tilt;#P connect 7 0 26 0;#P connect 26 0 14 0;#P connect 14 0 20 0;#P connect 20 0 29 0;#P connect 15 0 21 0;#P connect 26 1 15 0;#P connect 21 0 29 1;#P connect 29 0 32 0;#P connect 32 0 6 0;#P connect 8 0 27 0;#P connect 27 0 16 0;#P connect 16 0 22 0;#P connect 22 0 30 0;#P connect 27 1 17 0;#P connect 17 0 23 0;#P connect 23 0 30 1;#P connect 30 0 32 1;#P connect 9 0 28 0;#P connect 28 0 18 0;#P connect 18 0 24 0;#P connect 24 0 31 0;#P connect 19 0 25 0;#P connect 28 1 19 0;#P connect 25 0 31 1;#P connect 31 0 32 2;#P connect 20 0 33 0;#P connect 21 0 34 0;#P connect 29 0 39 0;#P connect 22 0 35 0;#P connect 23 0 36 0;#P connect 30 0 40 0;#P connect 24 0 37 0;#P connect 25 0 38 0;#P connect 31 0 41 0;#P pop;