/*
 *  reflect.object.cpp
 *  GameLibV2
 *
 *  Created by Michael Fortin on 06/04/07.
 *  Copyright 2007 __MyCompanyName__. All rights reserved.
 *
 */

#include "reflect.object.h"

using namespace reflect;

////////////////////////////////////////////////////////////////////////////////

struct object::SObject
{
	unsigned int m_nRefCount;	//Number of references to this object
};

////////////////////////////////////////////////////////////////////////////////
void object::retain()
{
	m_pObjData->m_nRefCount++;
}

////////////////////////////////////////////////////////////////////////////////

void object::release()
{
	m_pObjData->m_nRefCount--;
	
	if (m_pObjData->m_nRefCount == 0)
		delete this;
}

////////////////////////////////////////////////////////////////////////////////

object::object()
:m_pObjData(NULL)
{
	m_pObjData = new SObject;
	m_pObjData->m_nRefCount = 0;
}

////////////////////////////////////////////////////////////////////////////////

object::~object()
{
	if (m_pObjData != NULL)
	{
		delete m_pObjData;
	}
}

////////////////////////////////////////////////////////////////////////////////
